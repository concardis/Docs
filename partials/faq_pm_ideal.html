
<br/>
<div>
	<h2>Overview</h2>
	<br/>
	<p>
		iDEAL is the most popular payment method in the Netherlands and is a real-time bank transfer system covering all major Dutch consumer banks. 59% of all online transactions in the Netherlands are done using iDEAL.
	</p>
	<br/>
	<p>
		A customer will be redirected to his bank in order to intiate the bank transfer from their bank account to the merchant using the online banking credentials. The authentication of the transfer will be done via PIN & TAN, which makes the method very secure for consumers but also merchants. The payments are guaranteed as they are debited directly from the customer's bank account and there won't be any chargebacks.
	</p>
	<br/>
	<p>
		The following issuing banks are supported by iDEAL.
	</p>
	<p>
		<ol>
			<li>ABN AMRO</li>
			<li>ASN Bank</li>
			<li>bunq</li>
			<li>ING</li>
			<li>Intersolve</li>
			<li>knab</li>
			<li>Moneyou</li>
			<li>Rabobank</li>
			<li>Regio Bank</li>
			<li>SNS Bank</li>
			<li>Triodos Bank</li>
			<li>Van Lanschot Bankiers</li>
		</ol>
	</p>
	<p>
		To accept iDEAL payments, a merchant must usually sign up with a certified iDEAL acquiring bank who is responsible for the clearing & settlement with the issuer (customer bank). This requires the merchant to hold a local Dutch bank account with the acquiring bank.
	</p>
	<br/>
	<p>
		Concardis offers a different solution and collects the iDEAL funds directly from the customers. The funds can then be settled to the merchant without the need of having a specific bank account in the Netherlands.
	</p>
	<br/>
	<p>
		The collecting solution offers another advantage as a merchant can also easily execute refunds for iDEAL payments which are not supported by default by the iDEAL scheme. Our iDEAL refunds will be processed as a SEPA credit tansfer to the IBAN from the iDEAL online payment that will be stored securely within the Payengine.
	</p>
	<br/>
	<br/>
	<h2>CUSTOMER EXPERIENCE</h2>
	<br/>
	<p>
		When customer select Giropay payment method and pay the amount, he will be redirected to Giropay:
	</p>
	<br/>
		<img class="" src="/img/faq/ideal/ideal_customer_flow.png" width="100%" />
	<br/>
	<p>
		In the Payengine Modal Widget the selection of the payment method and bank could look as per following screens.
	</p>
	<br/>
	<table border="1" width="60%">
		<thead>
			<th>Step</th>
			<th>Description</th>
			<th >Screenshot</th>
		</thead>
		<tr>
			<td>
				1
			</td>
			<td>
				Select iDEAL
			</td>
			<td>
				<img class="" src="/img/faq/ideal/ideal_customer_step1.png" width="100%" />
			</td>
		</tr>
		<tr>
			<td>
				2
			</td>
			<td>
				Select bank
			</td>
			<td>
				<img class="" src="/img/faq/ideal/ideal_customer_step2.png" width="100%" />
			</td>
		</tr>
		<tr>
			<td>
				3
			</td>
			<td>
				Redirect to bank...
			</td>
			<td>
				<img class="" src="/img/faq/ideal/ideal_customer_step3.png" width="100%" />
			</td>
		</tr>
	</table>
	<br/>
	<p>
		In his online Bank Account, following the steps, he can pay for his purchase:
	</p>
	<br/>

	<h2>Payengine Details</h2>
	<br/>
	<div>
		<div class="content-box-wrapper">
			<div class="pricing-box-alt row clearfix">
				<div class="col-md-3 plans-features">
					<ul>
						<li class="header ms-hover"><strong>General</strong></li>
						<li class="ms-hover">Product</li>
						<li class="ms-hover">Type</li>
						<li class="ms-hover">Channels</li>
						<li class="ms-hover">Currencies</li>
						<li class="ms-hover">Countries</li>
						<li class="ms-hover">Technical Flow</li>
						<li class="ms-hover">Recurring</li>
						<li class="ms-hover">Chargebacks</li>
					</ul>
				</div>
				<div class="individual-plan">
					<ul>
						<li class="header ms-hover"></li>
						<li class="ms-hover">ideal</li>
						<li class="ms-hover">sepa</li>
						<li class="ms-hover">ecom</li>
						<li class="ms-hover">EUR</li>
						<li class="ms-hover">NL</li>
						<li class="ms-hover">asynchronous</li>
						<li class="ms-hover">no</li>
						<li class="ms-hover">no</li>
					</ul>
				</div>
			</div>
		</div>
		<br/>
		<br/>
		<div class="content-box-wrapper">
			<div class="pricing-box-alt row clearfix">
				<div class="col-md-3 plans-features">
					<ul>
						<li class="header ms-hover"><strong>Supported Features</strong></li>
						<li class="header ms-hover"><strong>& Services</strong></li>
						<li class="ms-hover">Debit</li>
						<li class="ms-hover">Preauthorization</li>
						<li class="ms-hover">Cancelation</li>
						<li class="ms-hover">Capture</li>
						<li class="ms-hover">Refunds</li>
						<li class="ms-hover">Notifications</li>
						<li class="ms-hover">Settlement Reporting</li>
					</ul>
				</div>
				<div class="individual-plan">
					<ul>
						<li class="header ms-hover"></li>
						<li class="header ms-hover"></li>
						<li class="ms-hover">yes</li>
						<li class="ms-hover">no</li>
						<li class="ms-hover">no</li>
						<li class="ms-hover">no</li>
						<li class="ms-hover">yes</li>
						<li class="ms-hover">yes - webhook, email</li>
						<li class="ms-hover">yes - unified settlement reporting</li>
					</ul>
				</div>
			</div>
		</div>
		<br/>
		<br/>
		<div class="content-box-wrapper">
			<div class="pricing-box-alt row clearfix">
				<div class="col-md-3 plans-features">
					<ul>
						<li class="header ms-hover"><strong>Integration Types</strong></li>
						<li class="ms-hover">API</li>
						<li class="ms-hover">Widget</li>
						<li class="ms-hover">Bridge</li>
						<li class="ms-hover">Shop Plugin</li>
					</ul>
				</div>
				<div class="individual-plan">
					<ul>
						<li class="header ms-hover"><strong></strong></li>
						<li class="ms-hover">yes</li>
						<li class="ms-hover">yes</li>
						<li class="ms-hover">no</li>
						<li class="ms-hover">no</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	<br/>
	<h2>Technical Flow</h2>
	<br/>
	<img class="" src="/img/faq/ideal/tech_flow.png" width="100%" />
	<br/>
	<strong>Important Note</strong>
	<p>
		In case a merchant integrates via the Payengine widget solution steps 2, 4 and 5 will be handled by the widget.
	</p>
	<br/>
	<p>
		As it is not ensured at the time of the redirect to the shop that the payment was 100% successful the Payengine waits for the final asynchronous notification from the bank before a status is moved from PENDING into SUCCESS or FAILURE.
	</p>
	<br/>
	<p>
		A merchant should register for the Payengine webhook notifications in order to receive this final status update. A GET on the order or DEBIT transaction would also work, but it is not ensured that the final status will be available immediately after the redirect and a merchant might have to query the GET multiple times. Therefore it is strongly recommended that the asynchronous notifications from the Payengine are used insted.
	</p>
	<br/>
	<p>
		The iDEAL notifications could be subscribed
	</p>
	<ul>
		<li>via the payengine API
			<a href="https://docs.payengine.de/buildyourown/restapi">
			(Link to API documentation)
			</a>
	</li>
		<li>via the Payengine merchant center
			<a href="https://docs.payengine.de/merchantcenter/managenotification">
			(Link to Merchant Center notifications documentation)
			</a>
		</li>
	</ul>
	<br/>
	<p>
		The following events have to be subscribed for in order to receive the iDEAL notifications, depending on the preferred source of notification.
	</p>
	<br/>
	<table border="1">
		<thead>
			<th>Source</th>
			<th>Event</th>
		</thead>
		<tr>
			<td>
				API
			</td>
			<td>
				notificationState = UPDATED
			</td>
		</tr>
		<tr>
			<td>
				Merchant Center
			</td>
			<td>
				<table>
				<tr>
					<td>
						event type = order update success
					</td>
				</tr>
				<tr>
					<td>
						event type = order update failure
					</td>
				</tr>
				</table>
			</td>
		</tr>
	</table>

	<div>
		<br/>
		<h2>Specifics</h2>
		<br/>
		<h3>iDEAL input parameters</h3>
		<br/>
		<p>The following input parameters are required for initiating an iDEAL payment via direct API integration.</p>
		<br/>
		<table border="1">
			<tr>
				<td >
					PARAMETER
				</td>
				<td >
					MANDATORY/OPTIONAL
				</td>
				<td >
					DESCRIPTION
				</td>
				<td >
					EXAMPLE
				</td>
			</tr>
			<tr>
				<td>
					payment.bic
				</td>
				<td>
					M
				</td>
				<td>
					BIC (8 or 11 alphanumeric letters) of consumerâ€™s bank
				</td>
				<td>
					RABONL2U
				</td>
			</tr>
			<tr>
				<td>
					payment.accountHolder
				</td>
				<td>
					M
				</td>
				<td>
					Name of the bank account holder
				</td>
				<td>
					John Doe
				</td>
			</tr>
			<tr>
				<td>
					payment.successUrl
				</td>
				<td>
					M
				</td>
				<td>
					Redirect URL for successful payment
				</td>
				<td>
					http://my.shop.com/success
				</td>
			</tr>
			<tr>
				<td>
					payment.failureUrl
				</td>
				<td>
					M
				</td>
				<td>
					Redirect URL for unsuccessful payment
				</td>
				<td>
					http://my.shop.com/fail
				</td>
			</tr>
			<tr>
				<td>
					payment.cancelUrl
				</td>
				<td>
					M
				</td>
				<td>
					Redirect URL when payment is canceled
				</td>
				<td>
					http://my.shop.com/cancel
				</td>
			</tr>
		</table>
		<br/>
		<h3>Selection of iDEAL banks</h3>
		<br/>
		<p>If the integration is done directly via the Payengine API and not via the widget solutions it has to be ensured that the consumer bank information is collected in the checkout.</p>
		<br/>
		<p>In this case it is recommended to let the consumer select the bank via a dropdown and the shop then sends the corresponding BIC to the Payengine. The list of supported banks and BIC can be found below.</p>
		<br/>
		<table border="1">
			<thead>
				<th>Bank Name</th>
				<th>BIC</th>
			</thead>
			<tr>
				<td>
					Rabobank
				</td>
				<td>
					RABONL2U
				</td>
			</tr>
			<tr>
				<td>
					ABN AMRO
				</td>
				<td>
					ABNANL2A
				</td>
			</tr>
			<tr>
				<td>
					Van Lanschot Bankiers
				</td>
				<td>
					FVLBNL22
				</td>
			</tr>
			<tr>
				<td>
					Triodos Bank
				</td>
				<td>
					TRIONL2U
				</td>
			</tr><tr>
				<td>
					ING Bank
				</td>
				<td>
					INGBNL2A
				</td>
			</tr>
			<tr>
				<td>
					SNS Bank
				</td>
				<td>
					SNSBNL2A
				</td>
			</tr>
			<tr>
				<td>
					ASN
				</td>
				<td>
					ASNBNL21
				</td>
			</tr>
			<tr>
				<td>
					RegioBank
				</td>
				<td>
					RBRBNL21
				</td>
			</tr>
			<tr>
				<td>
					Knab
				</td>
				<td>
					KNABNL2H
				</td>
			</tr>
			<tr>
				<td>
					Intersolve
				</td>
				<td>
					INTENL2H
				</td>
			</tr>
			<tr>
				<td>
					Bunq
				</td>
				<td>
					BUNQNL2A
				</td>
			</tr>
			<tr>
				<td>
					Moneyou
				</td>
				<td>
					MOYONL21
				</td>
			</tr>
		</table>
	</div>
	<div>
		<br/>
		<h2>Samples</h2>

		<br/>
		<div class="example-box-wrapper">
			<div class="content-box" ng-init="createCustomerRequestShow=false">
				<h3 class="content-box-header bg-default">
						iDEAL Debit request
						<div class="header-buttons-separator">
								<a href class="icon-separator toggle-button" ng-click="createCustomerRequestShow!=createCustomerRequestShow; console.log(createCustomerRequestShow)">
									<!-- <i class="glyph-icon icon-chevron-up"></i> -->
									<i class="glyph-icon icon-chevron-up" ng-if="createCustomerRequestShow"></i>
									<i class="glyph-icon icon-chevron-down" ng-if="!createCustomerRequestShow"></i>
								</a>
						</div>
				</h3>
				<!-- <div class="content-box-wrapper" ng-if="createCustomerRequestShow"> -->
				<div class="content-box-wrapper">
					<code>
{
  "product" : "ideal",
  "initialAmount": 1190,
  "currency": "EUR",
  "merchantOrderId": "merchantOrderId1549459331",

  "statementDescription": "merchant descriptor",
  "basket": [
    {
      "name": "USB-Stick",
      "articleNumber": "SW10029",
      "totalPrice": 1190,
      "totalPriceWithTax": 1190,
      "unitPrice": 1190,
      "unitPriceWithTax": 1190,
      "tax": 0,
      "quantity": 1
    }
  ],
  "payment": {
    "accountHolder": "John Doe",
    "bic": "RABONL2U"
  },
  "meta": {
    "preferredLanguage": "en"
  },
  "ipAddress": "1.1.1.1",
  "channel": "ECOM",
  "async": {
    "successUrl": "http://my.shop.com/success",
    "failureUrl": "http://my.shop.com/fail",
    "cancelUrl": "http://my.shop.com/cancel"
  }
}
					</code>
				</div>
			</div>
		</div>
		<br/>
		<div class="example-box-wrapper">
			<div class="content-box" ng-init="createCustomerResponseShow=false">
				<h3 class="content-box-header bg-default">
						iDEAL Debit response
						<div class="header-buttons-separator">
								<a href class="icon-separator toggle-button" ng-click="createCustomerResponseShow!=createCustomerResponseShow; console.log(createCustomerResponseShow)">
									<!-- <i class="glyph-icon icon-chevron-up"></i> -->
									<i class="glyph-icon icon-chevron-up" ng-if="createCustomerResponseShow"></i>
									<i class="glyph-icon icon-chevron-down" ng-if="!createCustomerResponseShow"></i>
								</a>
						</div>
				</h3>
				<!-- <div class="content-box-wrapper" ng-if="createCustomerRequestShow"> -->
				<div class="content-box-wrapper">
					<code>
{
  "createdAt": 1553174021405,
  "modifiedAt": 1553174021412,
  "merchantId": "merchant_bzo3pt4dir",
  "terms": null,
  "privacy": null,
  "orderId": "cavmq2apty",
  "merchantOrderId": "363",
  "paymentProviderTransactionId": "5ec41980-2388-42f0-b",
  "description": null,
  "statementDescription": "merchant descriptor",
  "initialAmount": 1190,
  "preauthorizedAmount": 0,
  "capturedAmount": 0,
  "refundedAmount": 0,
  "canceledAmount": 0,
  "currency": "EUR",
  "basket": [
    {
      "id": "Article-7383fbfe-b8cf-45b0-9b19-03f06d060f18",
      "name": "USB-Stick",
      "articleNumber": "SW10029",
      "totalPrice": 1190,
      "totalPriceWithTax": 1190,
      "unitPrice": 1190,
      "unitPriceWithTax": 1190,
      "quantity": 1,
      "tax": 0,
      "discount": null,
      "imageUrl": null,
      "articleUrl": null,
      "articleType": null
    }
  ],
  "customer": {
    "merchantCustomerId": null,
    "organizationRegistrationRegister": null,
    "organizationRegistrationId": null,
    "organizationEntityType": null,
    "organizationVatId": null,
    "companyName": null,
    "reference": null,
    "email": null,
    "customerId": "customer_4bzwaoujft",
    "addresses": [],
    "personas": [],
    "paymentInstruments": [],
    "createdAt": 1553174021400,
    "modifiedAt": 1553174021400,
    "customerType": null
  },
  "persona": null,
  "billingAddress": null,
  "shippingAddress": null,
  "ipAddress": "1.1.1.1",
  "paymentInstrument": {
    "createdAt": 1553174021390,
    "modifiedAt": 1553174021390,
    "paymentInstrumentId": "paymentinstrument_feyuy8axes",
    "merchantPaymentInstrumentId": null,
    "attributes": null,
    "encrypted": false,
    "origin": "ideal",
    "type": "sepa",
    "recurring": false,
    "recurringConsent": null
  },
  "transactions": [
    {
      "createdAt": 1553174021410,
      "modifiedAt": 1553174021441,
      "type": "DEBIT",
      "transactionId": "transaction_oxu1i6stfv",
      "description": null,
      "initialAmount": 1190,
      "refundedAmount": 0,
      "currency": "EUR",
      "status": "PENDING",
      "order": "cavmq2apty",
      "parentTransaction": null,
      "transactions": null,
      "basket": [
        {
          "id": "Article-7383fbfe-b8cf-45b0-9b19-03f06d060f18",
          "name": "USB-Stick",
          "articleNumber": "SW10029",
          "totalPrice": 1190,
          "totalPriceWithTax": 1190,
          "unitPrice": 1190,
          "unitPriceWithTax": 1190,
          "quantity": 1,
          "tax": 0,
          "discount": null,
          "imageUrl": null,
          "articleUrl": null,
          "articleType": null
        }
      ],
      "providerCode": null,
      "merchantMessage": null,
      "customerMessage": null,
      "descriptor": null,
      "meta": null,
      "challenge": null,
      "asyncNotificationSubscriptionId": null,
      "tracking": null
    }
  ],
  "status": "OPEN",
  "channel": "ECOM",
  "source": null,
  "settled": false,
  "settlementDate": null,
  "allowedProducts": null,
  "product": "ideal",
  "transactionType": "DEBIT",
  "meta": {
    "preferredLanguage": "en"
  },
  "async": {
    "successUrl": "http://my.shop.com/success",
    "failureUrl": "http://my.shop.com/fail",
    "cancelUrl": "http://my.shop.com/cancel"
  },
  "deviceIdent": null,
  "asyncNotificationSubscriptionId": null,
  "redirectUrl": "https://apitest.payengine.de/order/ideal/1.0/redirect/Order-451f357a-3d91-4591-853b-16df5deafdeb"
}
					</code>
				</div>
			</div>
		</div>


	</div>
	<div>
		<br/>
		<h2>Settlements</h2>
		<br/>
		<p>All settlement information will be provided in the Unified Settlement Report. The format and mappings can be found in the corresponding documentation (see
			<a href="https://docs.payengine.de/merchantcenter/settlement_report">
				Unified Settlement Report).
			</a>
		</p>
	</div>
</div>
